// Copyright (c) Microsoft Corporation.
// Licensed under the MIT License.
import { Component, Input, ViewChild } from '@angular/core';
import { PowerBIEmbedComponent } from '../powerbi-embed/powerbi-embed.component';
/**
 * Report component to embed the report, extends the Base Component
 */
export class PowerBIReportEmbedComponent extends PowerBIEmbedComponent {
    constructor() {
        super();
        // Phased embedding flag (Optional)
        this.phasedEmbedding = false;
    }
    // Getter for this._embed
    get embed() {
        return this._embed;
    }
    // Setter for this._embed
    set embed(newEmbedInstance) {
        this._embed = newEmbedInstance;
    }
    // Returns embed object to calling function
    getReport() {
        return this._embed;
    }
    ngOnInit() {
        // Initialize PowerBI service instance variable from parent
        super.ngOnInit();
    }
    ngOnChanges(changes) {
        if (changes.embedConfig) {
            const prevEmbedConfig = changes.embedConfig.previousValue;
            // Check if the function is being called for the first time
            if (!prevEmbedConfig) {
                return;
            }
            // Input from parent get updated, thus call embedOrUpdateReport function
            this.embedOrUpdateReport(prevEmbedConfig);
        }
        // Set event handlers if available
        if (this.eventHandlers && this.embed) {
            super.setEventHandlers(this.embed, this.eventHandlers);
        }
    }
    ngAfterViewInit() {
        // Check if container exists on the UI
        if (this.containerRef.nativeElement) {
            // Decide to embed, load or bootstrap
            if (this.embedConfig.accessToken && this.embedConfig.embedUrl) {
                this.embedReport();
            }
            else {
                this.embed = this.powerbi.bootstrap(this.containerRef.nativeElement, this.embedConfig);
            }
        }
        // Set event handlers if available
        if (this.eventHandlers && this.embed) {
            super.setEventHandlers(this.embed, this.eventHandlers);
        }
    }
    /**
     * Embed or load the PowerBI Report based on phasedEmbedding flag
     *
     * @returns void
     */
    embedReport() {
        // Check if the HTML container is rendered and available
        if (!this.containerRef.nativeElement) {
            return;
        }
        // Load when phasedEmbedding flag is true, embed otherwise
        if (this.phasedEmbedding) {
            this.embed = this.powerbi.load(this.containerRef.nativeElement, this.embedConfig);
        }
        else {
            this.embed = this.powerbi.embed(this.containerRef.nativeElement, this.embedConfig);
        }
    }
    /**
     * When component updates, choose to _embed_ or _load_ the powerbi report
     * or do nothing if the embedUrl and accessToken did not update in the new properties
     *
     * @param prevEmbedConfig IReportEmbedConfiguration
     * @returns void
     */
    embedOrUpdateReport(prevEmbedConfig) {
        // Check if Embed URL and Access Token are present in current properties
        if (!this.embedConfig.accessToken || !this.embedConfig.embedUrl) {
            return;
        }
        // Embed or load in the following scenario
        // Embed URL is updated (E.g. New report is to be embedded)
        if (this.containerRef.nativeElement && this.embedConfig.embedUrl !== prevEmbedConfig.embedUrl) {
            this.embedReport();
        }
    }
}
PowerBIReportEmbedComponent.decorators = [
    { type: Component, args: [{
                selector: 'powerbi-report[embedConfig]',
                template: '<div class={{cssClassName}} #reportContainer></div>'
            },] }
];
PowerBIReportEmbedComponent.ctorParameters = () => [];
PowerBIReportEmbedComponent.propDecorators = {
    embedConfig: [{ type: Input }],
    phasedEmbedding: [{ type: Input }],
    eventHandlers: [{ type: Input }],
    containerRef: [{ type: ViewChild, args: ['reportContainer',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG93ZXJiaS1yZXBvcnQtZW1iZWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcG93ZXJiaS1jbGllbnQtYW5ndWxhci9zcmMvY29tcG9uZW50cy9wb3dlcmJpLXJlcG9ydC1lbWJlZC9wb3dlcmJpLXJlcG9ydC1lbWJlZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsdUNBQXVDO0FBQ3ZDLGtDQUFrQztBQUVsQyxPQUFPLEVBQWlCLFNBQVMsRUFBYyxLQUFLLEVBQW9DLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV6SCxPQUFPLEVBQWdCLHFCQUFxQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFFL0Y7O0dBRUc7QUFLSCxNQUFNLE9BQU8sMkJBQTRCLFNBQVEscUJBQXFCO0lBNEJwRTtRQUNFLEtBQUssRUFBRSxDQUFDO1FBeEJWLG1DQUFtQztRQUMxQixvQkFBZSxHQUFhLEtBQUssQ0FBQztJQXdCM0MsQ0FBQztJQVpELHlCQUF5QjtJQUN6QixJQUFZLEtBQUs7UUFDZixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUVELHlCQUF5QjtJQUN6QixJQUFZLEtBQUssQ0FBQyxnQkFBbUM7UUFDbkQsSUFBSSxDQUFDLE1BQU0sR0FBRyxnQkFBZ0IsQ0FBQztJQUNqQyxDQUFDO0lBTUQsMkNBQTJDO0lBQzNDLFNBQVM7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFnQixDQUFDO0lBQy9CLENBQUM7SUFFRCxRQUFRO1FBQ04sMkRBQTJEO1FBQzNELEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNuQixDQUFDO0lBRUQsV0FBVyxDQUFDLE9BQXNCO1FBQ2hDLElBQUksT0FBTyxDQUFDLFdBQVcsRUFBRTtZQUN2QixNQUFNLGVBQWUsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLGFBQTBDLENBQUM7WUFFdkYsMkRBQTJEO1lBQzNELElBQUksQ0FBQyxlQUFlLEVBQUU7Z0JBQ3BCLE9BQU87YUFDUjtZQUVELHdFQUF3RTtZQUN4RSxJQUFJLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDM0M7UUFFRCxrQ0FBa0M7UUFDbEMsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDcEMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ3hEO0lBQ0gsQ0FBQztJQUVELGVBQWU7UUFDYixzQ0FBc0M7UUFDdEMsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRTtZQUNuQyxxQ0FBcUM7WUFDckMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRTtnQkFDN0QsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO2FBQ3BCO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO2FBQ3hGO1NBQ0Y7UUFFRCxrQ0FBa0M7UUFDbEMsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDcEMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ3hEO0lBQ0gsQ0FBQztJQUVEOzs7O09BSUc7SUFDSyxXQUFXO1FBQ2pCLHdEQUF3RDtRQUN4RCxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxhQUFhLEVBQUU7WUFDcEMsT0FBTztTQUNSO1FBRUQsMERBQTBEO1FBQzFELElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUNuRjthQUFNO1lBQ0wsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDcEY7SUFDSCxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0ssbUJBQW1CLENBQUMsZUFBMEM7UUFDcEUsd0VBQXdFO1FBQ3hFLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFO1lBQy9ELE9BQU87U0FDUjtRQUVELDBDQUEwQztRQUMxQywyREFBMkQ7UUFDM0QsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsS0FBSyxlQUFlLENBQUMsUUFBUSxFQUFFO1lBQzdGLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNwQjtJQUNILENBQUM7OztZQXZIRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLDZCQUE2QjtnQkFDdkMsUUFBUSxFQUFFLHFEQUFxRDthQUNoRTs7OzswQkFJRSxLQUFLOzhCQUdMLEtBQUs7NEJBR0wsS0FBSzsyQkFHTCxTQUFTLFNBQUMsaUJBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuXHJcbmltcG9ydCB7IEFmdGVyVmlld0luaXQsIENvbXBvbmVudCwgRWxlbWVudFJlZiwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRW1iZWQsIElSZXBvcnRFbWJlZENvbmZpZ3VyYXRpb24sIFJlcG9ydCB9IGZyb20gJ3Bvd2VyYmktY2xpZW50JztcclxuaW1wb3J0IHsgRXZlbnRIYW5kbGVyLCBQb3dlckJJRW1iZWRDb21wb25lbnQgfSBmcm9tICcuLi9wb3dlcmJpLWVtYmVkL3Bvd2VyYmktZW1iZWQuY29tcG9uZW50JztcclxuXHJcbi8qKlxyXG4gKiBSZXBvcnQgY29tcG9uZW50IHRvIGVtYmVkIHRoZSByZXBvcnQsIGV4dGVuZHMgdGhlIEJhc2UgQ29tcG9uZW50XHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3Bvd2VyYmktcmVwb3J0W2VtYmVkQ29uZmlnXScsXHJcbiAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPXt7Y3NzQ2xhc3NOYW1lfX0gI3JlcG9ydENvbnRhaW5lcj48L2Rpdj4nLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgUG93ZXJCSVJlcG9ydEVtYmVkQ29tcG9uZW50IGV4dGVuZHMgUG93ZXJCSUVtYmVkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQge1xyXG4gIC8vIElucHV0KCkgc3BlY2lmeSBwcm9wZXJ0aWVzIHRoYXQgd2lsbCBiZSBwYXNzZWQgZnJvbSBwYXJlbnRcclxuICAvLyBDb25maWd1cmF0aW9uIGZvciBlbWJlZGRpbmcgdGhlIFBvd2VyQkkgUmVwb3J0IChSZXF1aXJlZClcclxuICBASW5wdXQoKSBlbWJlZENvbmZpZyE6IElSZXBvcnRFbWJlZENvbmZpZ3VyYXRpb247XHJcblxyXG4gIC8vIFBoYXNlZCBlbWJlZGRpbmcgZmxhZyAoT3B0aW9uYWwpXHJcbiAgQElucHV0KCkgcGhhc2VkRW1iZWRkaW5nPzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAvLyBNYXAgb2YgZXZlbnQgbmFtZSBhbmQgaGFuZGxlciBtZXRob2RzIHBhaXJzIHRvIGJlIHRyaWdnZXJlZCBvbiB0aGUgZXZlbnQgKE9wdGlvbmFsKVxyXG4gIEBJbnB1dCgpIGV2ZW50SGFuZGxlcnM/OiBNYXA8c3RyaW5nLCBFdmVudEhhbmRsZXIgfCBudWxsPjtcclxuXHJcbiAgLy8gUmVmIHRvIHRoZSBIVE1MIGRpdiBjb250YWluZXIgZWxlbWVudFxyXG4gIEBWaWV3Q2hpbGQoJ3JlcG9ydENvbnRhaW5lcicpIHByaXZhdGUgY29udGFpbmVyUmVmITogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIC8vIEVtYmVkZGVkIGVudGl0eVxyXG4gIC8vIE5vdGU6IERvIG5vdCByZWFkIG9yIGFzc2lnbiB0byB0aGlzIG1lbWJlciB2YXJpYWJsZSBkaXJlY3RseSwgaW5zdGVhZCB1c2UgdGhlIGdldHRlciBhbmQgc2V0dGVyXHJcbiAgcHJpdmF0ZSBfZW1iZWQ/OiBFbWJlZDtcclxuXHJcbiAgLy8gR2V0dGVyIGZvciB0aGlzLl9lbWJlZFxyXG4gIHByaXZhdGUgZ2V0IGVtYmVkKCk6IEVtYmVkIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLl9lbWJlZDtcclxuICB9XHJcblxyXG4gIC8vIFNldHRlciBmb3IgdGhpcy5fZW1iZWRcclxuICBwcml2YXRlIHNldCBlbWJlZChuZXdFbWJlZEluc3RhbmNlOiBFbWJlZCB8IHVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy5fZW1iZWQgPSBuZXdFbWJlZEluc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJucyBlbWJlZCBvYmplY3QgdG8gY2FsbGluZyBmdW5jdGlvblxyXG4gIGdldFJlcG9ydCgpOiBSZXBvcnQge1xyXG4gICAgcmV0dXJuIHRoaXMuX2VtYmVkIGFzIFJlcG9ydDtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgLy8gSW5pdGlhbGl6ZSBQb3dlckJJIHNlcnZpY2UgaW5zdGFuY2UgdmFyaWFibGUgZnJvbSBwYXJlbnRcclxuICAgIHN1cGVyLm5nT25Jbml0KCk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAoY2hhbmdlcy5lbWJlZENvbmZpZykge1xyXG4gICAgICBjb25zdCBwcmV2RW1iZWRDb25maWcgPSBjaGFuZ2VzLmVtYmVkQ29uZmlnLnByZXZpb3VzVmFsdWUgYXMgSVJlcG9ydEVtYmVkQ29uZmlndXJhdGlvbjtcclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBmdW5jdGlvbiBpcyBiZWluZyBjYWxsZWQgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgIGlmICghcHJldkVtYmVkQ29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJbnB1dCBmcm9tIHBhcmVudCBnZXQgdXBkYXRlZCwgdGh1cyBjYWxsIGVtYmVkT3JVcGRhdGVSZXBvcnQgZnVuY3Rpb25cclxuICAgICAgdGhpcy5lbWJlZE9yVXBkYXRlUmVwb3J0KHByZXZFbWJlZENvbmZpZyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IGV2ZW50IGhhbmRsZXJzIGlmIGF2YWlsYWJsZVxyXG4gICAgaWYgKHRoaXMuZXZlbnRIYW5kbGVycyAmJiB0aGlzLmVtYmVkKSB7XHJcbiAgICAgIHN1cGVyLnNldEV2ZW50SGFuZGxlcnModGhpcy5lbWJlZCwgdGhpcy5ldmVudEhhbmRsZXJzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIC8vIENoZWNrIGlmIGNvbnRhaW5lciBleGlzdHMgb24gdGhlIFVJXHJcbiAgICBpZiAodGhpcy5jb250YWluZXJSZWYubmF0aXZlRWxlbWVudCkge1xyXG4gICAgICAvLyBEZWNpZGUgdG8gZW1iZWQsIGxvYWQgb3IgYm9vdHN0cmFwXHJcbiAgICAgIGlmICh0aGlzLmVtYmVkQ29uZmlnLmFjY2Vzc1Rva2VuICYmIHRoaXMuZW1iZWRDb25maWcuZW1iZWRVcmwpIHtcclxuICAgICAgICB0aGlzLmVtYmVkUmVwb3J0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5lbWJlZCA9IHRoaXMucG93ZXJiaS5ib290c3RyYXAodGhpcy5jb250YWluZXJSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5lbWJlZENvbmZpZyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXQgZXZlbnQgaGFuZGxlcnMgaWYgYXZhaWxhYmxlXHJcbiAgICBpZiAodGhpcy5ldmVudEhhbmRsZXJzICYmIHRoaXMuZW1iZWQpIHtcclxuICAgICAgc3VwZXIuc2V0RXZlbnRIYW5kbGVycyh0aGlzLmVtYmVkLCB0aGlzLmV2ZW50SGFuZGxlcnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRW1iZWQgb3IgbG9hZCB0aGUgUG93ZXJCSSBSZXBvcnQgYmFzZWQgb24gcGhhc2VkRW1iZWRkaW5nIGZsYWdcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHZvaWRcclxuICAgKi9cclxuICBwcml2YXRlIGVtYmVkUmVwb3J0KCk6IHZvaWQge1xyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIEhUTUwgY29udGFpbmVyIGlzIHJlbmRlcmVkIGFuZCBhdmFpbGFibGVcclxuICAgIGlmICghdGhpcy5jb250YWluZXJSZWYubmF0aXZlRWxlbWVudCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9hZCB3aGVuIHBoYXNlZEVtYmVkZGluZyBmbGFnIGlzIHRydWUsIGVtYmVkIG90aGVyd2lzZVxyXG4gICAgaWYgKHRoaXMucGhhc2VkRW1iZWRkaW5nKSB7XHJcbiAgICAgIHRoaXMuZW1iZWQgPSB0aGlzLnBvd2VyYmkubG9hZCh0aGlzLmNvbnRhaW5lclJlZi5uYXRpdmVFbGVtZW50LCB0aGlzLmVtYmVkQ29uZmlnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZW1iZWQgPSB0aGlzLnBvd2VyYmkuZW1iZWQodGhpcy5jb250YWluZXJSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5lbWJlZENvbmZpZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXaGVuIGNvbXBvbmVudCB1cGRhdGVzLCBjaG9vc2UgdG8gX2VtYmVkXyBvciBfbG9hZF8gdGhlIHBvd2VyYmkgcmVwb3J0XHJcbiAgICogb3IgZG8gbm90aGluZyBpZiB0aGUgZW1iZWRVcmwgYW5kIGFjY2Vzc1Rva2VuIGRpZCBub3QgdXBkYXRlIGluIHRoZSBuZXcgcHJvcGVydGllc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHByZXZFbWJlZENvbmZpZyBJUmVwb3J0RW1iZWRDb25maWd1cmF0aW9uXHJcbiAgICogQHJldHVybnMgdm9pZFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZW1iZWRPclVwZGF0ZVJlcG9ydChwcmV2RW1iZWRDb25maWc6IElSZXBvcnRFbWJlZENvbmZpZ3VyYXRpb24pOiB2b2lkIHtcclxuICAgIC8vIENoZWNrIGlmIEVtYmVkIFVSTCBhbmQgQWNjZXNzIFRva2VuIGFyZSBwcmVzZW50IGluIGN1cnJlbnQgcHJvcGVydGllc1xyXG4gICAgaWYgKCF0aGlzLmVtYmVkQ29uZmlnLmFjY2Vzc1Rva2VuIHx8ICF0aGlzLmVtYmVkQ29uZmlnLmVtYmVkVXJsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFbWJlZCBvciBsb2FkIGluIHRoZSBmb2xsb3dpbmcgc2NlbmFyaW9cclxuICAgIC8vIEVtYmVkIFVSTCBpcyB1cGRhdGVkIChFLmcuIE5ldyByZXBvcnQgaXMgdG8gYmUgZW1iZWRkZWQpXHJcbiAgICBpZiAodGhpcy5jb250YWluZXJSZWYubmF0aXZlRWxlbWVudCAmJiB0aGlzLmVtYmVkQ29uZmlnLmVtYmVkVXJsICE9PSBwcmV2RW1iZWRDb25maWcuZW1iZWRVcmwpIHtcclxuICAgICAgdGhpcy5lbWJlZFJlcG9ydCgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=